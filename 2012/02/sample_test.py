import unittest
import base64, pickle
from solution import create_board, step_board

class GameOfLifeTestCase(unittest.TestCase):
    def test_create_board(self):
        board = create_board()
        self.assertEqual(len(board), 50)

        for row in board:
            self.assertEqual(len(row), 50)
            for cell in row:
                self.assertTrue(cell in (0,1))

    def test_step_board(self):
        for el in BOARD_TEST_DATA:
            orig, expected = el
            board = self.decodeboard(orig)
            step_board(board)
            self.assertEqual(self.encodeboard(board), expected)

    def decodeboard(self, n, size = 50):
        flat = bin(pickle.loads(base64.decodebytes(n)))[2:].rjust(size * size,"0")
        board = []
        for i in range(0, size):
            board.append([int(x) for x in flat[(i*size): ((i+1)*size)]])
        return board

    def encodeboard(self, board):
        flat = "".join(["".join([str(x & 1) for x in row]) for row in board])
        return base64.encodebytes(pickle.dumps(int(flat, 2)))


BOARD_TEST_DATA = [
( b'gAOLMQEAAAAAAAAAAAABFAEEhCAwAABIUARAgGgAxAoAEIKQAErBDgEAoAIAAAgEAAMBIwCoQAAI\ngAAkEAICAKAAEEAAARAAABEgEAEQQIBcABAgCAdQAIAAMAIUAUAgAAAggQAEwAhAAFAggAq0AIAA\nGABEqgUhQECEkAAQhAGAgCcEAhIgBAADgIIIIRUAAFBMACQEAQJAICEAAOACAECICEAAUDnQBIQA\nMIEAARDAAABACASQAAhAKACIAABIwCAiABQAIEgIIAoQAEAoQAiCIAAAAEA0ggAYASgACxEAgAAL\nIEAMAACCYAAAIICzgMACCCEmEIACMAIyCAACAAoQGAAICAyAgBJAAMICABAMDCCAAFDgCAEAAAoI\nwIgUEISAAIUghAwQkEIAB4AEYkASABYyAoBELg==\n' , b'gAOLLgEAAAAAAAAAAAAAAAAACAA4IAwAWAfAAHAAQD6AAsABEBIABAAAgAGADQAEAAcAAAAIAAAA\nAABAAAAAAAAAIAAAAAAAAAABAAAAQAA0AAAAjANaAAAAMAwoAAAAYAAwAAAAwAFAACAAAAb4AMAA\nGBDAUwACgAAAEA4AgAMAgUcAAAcABAABAIwBAAoAAAA8ADQAAPAgADAAAHAAAAoYAMABqDDAAAAA\noIKAAQBAAAAACAAAAQAAYAAAAAAAwAEAAAAAAAAYAAQAAAAQAAjGAABCAAB4xgAAAMCBGQAAAMAB\nJAAAAEBCYAAAAIAegMEBjAFRAYAGcAc0BAADgAJwcAAYAGwAQAAAAHAAADQMBgAAACBwCAAAAAAA\n4QAIAAYAgAEgABgAGCgAA0MMYIADCAAwLg==\n' ),
( b'gAOLMwEAAAAAAAAAAAAGAgKECAAIAACAjARBIIAAAwAiASQAEAAQBAAABoEgCICCgFAIAlCHIAIy\nwABiBAkGgIAiQAgYAABAAAAgAIQBDgIAABAIgZCQOAAAAKMADCAkAEoAYIALAAUCEAgQAQQIQAIB\ngEEAByIBAFAAIAANAAgUAUIIgAAAJCIEQCACQAjAA0gAAQJAAAAQAAAIAIggAMABCBCABBABkAIA\nARqgMJAQhDgAdEKCAAAAAYhAAGIQAgzBAgQwAUEAUIAYAAMAAAgIQAACAAAAAAJCACAUgDCAACMe\niQwYCAJGAQAEAAiAAAEEWSEMEEFAAAEBAABAJQiwASABgCEBShAkAOgAAAQBAQISA0ALADAIFDgA\nCcBRAAACAgQgREEBAACABAwKUAIJBCDAAAAAgAAu\n' , b'gAOLLgEAAAAAAAAAAAAGAAAAAQAIAADABQBgAAAABwCGAwAACAAYBkAAAABAAMAAGAAIMIATAQcy\nQMAjAAUKAAEQAAAEAABAAABgAAABBgAABAAEsBgAEQAAAGYAbCAAAMoBcIAPAAIDgAEcAACAwAAA\nACgABoABAIYCGAANAAAAAAEYAAAACAQQAAAAwACgAQAAAAAABgAAADAAAABgAMAAAADAAAAFGAAA\nAxoAcBgAAGgA4GEAAHAAAIZwAAAIABiAAwAjgCAAAAAAAAIAAAAAAAAAAAAAAAYAAAANABEEAcGW\nAIQAAALMAABgIBgAAgAIoGAAAACAgAFIAACAYgzAAQAAgGEAAwAAAIQBAGABAAQGAwwGAEgcBBAA\nAEAxAIAAAADigoMBCACAAQ4eAAAAADBALg==\n' ),
( b'gAOLMgEAAAAAAAAAAACAICCAAgAgAEugAIAg4AEAQAsAAAJDAoIACAgLCAACA2AEAoUIAAMSAAAA\nOAIgCogAgMAHAGAAQBYgABAAgADAAACkIIA1IAAAAAAMAEAUIEAwkBBQQQAMQIAAAAAgJIgBAiAA\nCgQggQQFARgEQoMIGBIAAIBACAAUQABQSBABICgAAQISkBSBABtQAAgCSIACACCIAAARsIQQQAAA\nCKAAAAQCRgkAQASATCEECAQACQQAcEKAYREgCMYAEQMAAAIIggAAIAAIMGgABKgAAYoghARhAAIA\nCGASAgABQlEAQBAknqAgAACQEAQAAAEOpAABBgAAAwAQgQoAAgACKAAAKSkAgsEAEgWiEgIgWEAI\nAIAaAQgAUAiAAkoCAABAAIYIgEkQUAgAoABDAi4=\n' , b'gAOLMQEAAAAAAAAAAAAAQAAAAAAA8AEAAAAAwMEAgQEAAIADAEYAAAwLAAAHQGAGAAAAAgEZAAAA\nMPwAABgAIIAHAGAAAAYmAIABANDAAAAAAIABAAAAAAAQAAAgAAAwAACAAACMAKCAAABwAAABAAAA\nAAYCwAADBhgAAAMYDCAAAAAgMAAAAACgQAAAAAKAwAYGAMEBABwgABwGAKAAAHAMAAAAAEAAAACA\n4AEAAAIAxwABAAAAHAEAHAgADAwA8BGAIgAAQIYBgwMAAAAHChAAABQAEHUAAEAQwMEBANhDAAAA\nODgAAQAAZvAAAAAOksMAAICBQQCAAQDEQAAAAAAQAQAAHAAACgAAcCAAnAAQgAEAMgoBAAYEOAAA\nDADQwQEAAABwAHEA4AAADAYAAMAAABgAAAADLg==\n' ),
( b'gAOLMgEAAAAAAAAAAAgIAAABhIEgCWSgABhCIAAiACAgAQAQEAAAgAAAAQECggYAACABgIIRGAIN\nKGACAgAgAALAEAgAggEAAQAVEBBKYEJlDgQBzwEIAQBAAwBkACIAKYAgEQ4BmABICgGAARUIKEQA\nEQIGSJEgEBAEQgAAAAAGgAAFECMAKQIEAIAKTEAgARIUCCQAEIAACBhKQCSRMDAIAggwOAAQA0AM\nCQgAAAiBAFAIiEIGAAEAAJpQAABAQCFEAAkAAAAABAiFAUAEAgEJEpAAIEQDgEmQAATICAJMABRg\nIABAIEyAACBwSAFAglAAAMEAACSCRgUAIgAAEQIQRCAiQJQAQAkgAKABwEEQAAgEoEQAQAAAEAAA\niAwCAVIECAAIIShgABAgABgAAIgAUYCwDAFhYS4=\n' , b'gAOLMwEAAAAAAAAAAAAAAAAAAEMwAEAAABjEAAADAGAAAAAAAAAAwAEAAAAAQAYABoADBIEBAAAO\nAAAmAABwIADAAAAAAAAAA6ASAQJAUwDMBABwRwGGEQCAAwJwAAIACQBwAgwAuAEEiyiAwAMAbA4A\nDA4C8AAAAAAIYIAAwAAAhAECAEAAEwAEAIwGzgAAAAAcEAQBCMAgHBQFAAAOPHDcARhjdAAAAGDA\nQAgABAADACAAAGYGAAAAIJgRAAAAAHAAAAAAAAAAAACCAQAAAOAIJgAAAAI3wIEDAAoAAAYoADJw\nAAAAICjAAAAgQAAAAMAAIAEAAAAAhgICAAAAMA0A6AAAAHQAUAAAAOADQCEAAAAGAAUAAAAAAAkA\nAAAAAAQIAAAcABggAABgCHCAAsCAOEAAAAAA4AAu\n' ),
( b'gAOLMgEAAAAAAAAAAIAAAgAAAAIEAgYhQACACFGAABoAAAARCAEgCAASICRAhAIAwKABAAAQECBE\nwFUBwIwAAGiFQEEKgEhQDmICACQIaEAQCQgAAIACgEABQUUAiARIDEAACAqARAgcHgAIQBIAYQjI\nRAAAAEAEREAAAAEFAIEIAAERYBEIAAACCAACAFRwQACgBBEBgBwAAAAAAiAgdYAIhgDACAAAgAcS\nAAhDIBAChlAABDBCAKAACAQQJAQQEQAGAIQFAKAQCBGsGaAAAiIAoEBKAAQigYgApAAFiAYQAggh\nBEACHhAYAwCAQAiCGoQJgIAQAAAAQJgAIAAQACkAyRgIAAAIBeAAEQCBEpCAgACIBAKEAEABgAIE\nogCIABPACAAAIKEAABACBACACUISAUQgAAACMi4=\n' , b'gAOLLAEAAAAAAAAAAAAAAAAAAAAABA4AAAQAABgAAQAAAAADBBAAAAAAYHwAAAAAwNABEA4AMEAG\ngBcAwMgAAEmEAEsFANArGyIGAAYAaEABADgAYAEBQAAAAwAAAAYADoIBBwQAWAAIJAAQIAAgQADA\nAAAAgOAAogAAAIAIuAIBAAAIAAAAAAoCAAAQACgwYAIAAKBAARyAFwAAAXAwIgAAhAHAiAEAGAWA\nAggAABIAAFAAAiAEGMAACEABAMABABAGAIhlBlAYABgeGIAAAEJwMEAFEIABgAAAAAAMAAcABgRs\nAAAAFADYBgAAQABAGAAAAEMAFAAGABgAMAAAAHCAwCgAAEAADJIAAABAC4ACAAAARAACAQAAwAU4\nBwAAABsAAAAAAEAAAwAAAAAAAMAACC4=\n' ),
( b'gAOLMgEAAAAAAAAAACiAQICFI4EQIMEyJAEgAQAIAAAECAAgwAQQABBAAAQC0EAAASQIAAQQgBIA\nEAHMAADAAAIAAACAABAAAEAAEAAIMAAAIMSACACAAAARVKQBUEAQQAAACAQBCARABAAAQBAXagAA\ngIAAAAAAIDAAAAAEICAQHgZARhBVACgAAABAAAAAADBABYIECgAAUgCIIBRQiFQggAEEggZEACEB\nggJgAAgIAgDAk0AAACBCAEAAhEAIkBAAAAAACCAAAKAAESFAQCCQQDAoUYQAIUCDAQgYAFFShjit\nQAIMIRAAAAAAEAAQjAAACQBJAIA4ZgAQYgAGAAgACACDAgwBmoFHyIMAIJAIIJIAAAQAgAAAAIEB\nQQBggAAAAQIAgEAAAwgAAACADCAAAQDBIgTEAC4=\n' , b'gAOLLwEAAAAAAAAAABAAAMCPA0AAAAA6DgAAAAAYMAAAAAAwgAAAMADAAA0AgAAAAAgAgAIzAAAw\nAADAAABAAAYAAAAAAwAAAAAAACAAAAAAAMAAiAAAAAABGAAAAAAAIAAAAAAAAIIAHAAAYDACMAAA\nAAAIAAAAABAAAwAAACAIDAYAAAAIMAgAAABIAEAAAAAACQAABAAAHwgcIAAAEAIwwCGAAQYIAAUA\nAAUAAAgAAARAAiAAAAAACAAAAAAAAAAAAAAAAAAAAAAAMAAAAEAAALjwAAIBAGADAhobgIEoCjgw\nAACMGmAIAgAgAAAAAACEGQDAKIARZgAAAwCngAIA2EAbYRAAHAAJ2HMAcAIYcAsAAGAAAAAAAAAA\nAAAAAACAAAMAAAAABRwAAABAEAAAAAAAMS4=\n' ),
( b'gAOLMgEAAAAAAAAAAEAFBiAIZEAAAJAQBAQGFMFHAgAGMAMAQAYANAEBIKJAkAQQQAAAAAAAMABA\ncAQJoBJCgUAQaAABACgAgAIZGiIAIUqEEECAEgECIAAkCAwAIgAMAEAkogEAAABABFMUICBAIgII\nAETBAAEFgJGAACECACMAoFAUwIhAICACwBIABEIIRoAAIABQAAgQAgCEBAQIARIBEAACBQBCmsAA\nYYgASgAKAyEAAAAEIAgEAUAAABQEACSlAUEcSMQCAACBEEwBAAiAIEAAQBIQgEAMAABhAaSAAGGA\nAYBBBQCgCCAgQgAAAAAIAGIAQCAChIQIBAIIgUCAIIQIQAiAyRAkAHCAAACAASCABgQAACABCABg\nAgAAYAUBBAAggCEIVpmWkEBAEAAKAIQMQoRABC4=\n' , b'gAOLKwEAAAAAAAAAAAAAAAAAAAADCBAwAIAChMAHAAAM0AIOAAQYOAMAABAA4AAAAAAACAAAcAAg\ncAAAsAGAwAAAsIEGBRQAgAIaDHAAAABAOIAAhwMAAAABBAwAMAAIACAAAAEAAADgjAYAACAgIAQA\nQMDAgAAAwBkAAQoOAGEAAMgI4AgAQCGDgDIAAAAcAAcAAABQAAAAAACAAgAAAAAAPzAABgAAPcCB\nYAAAdAAGhgMAAAAAAA4AAIAwADgMAPADAMA4AMoBAAAQELgDAAAAYJABACA4gAEAABgAAKDQAADA\nAICBAwAABAAGAgAAAAAAAGMAAAAAAIgBAAMEAAEgIAwQABgAwQAwAHDAAgOAASAABgAAAAAAIAAA\nAAAAkAAABAAAwDsIJgAGAMNBkGIoLg==\n' ),
( b'gAOLMQEAAAAAAAAAACggAAhAFAAAAAACJAAAEA4MAAAoUQEEgRQACJAkIBDAAAAiZhAAAIAAFgAC\nwAQBQCAEQIAUAQAZAAhYAEGEAhJCBAEAAAAEAkCSAAAMAEAEAALAgCUoEAECgjQigAQAIQCkQiII\nAIAIACAElIEAIkCBEiCQAAEUFAOQASBICFSBABA4AQAIACIUHAEAghgAACAAgAAQAAABQhQgEAIJ\nQAZgAAKAIAAAgFCAEARQAEAAAgAAGACkUAA4GAQAAAjgAIgAAAEEBAgASGfAMBJKAKwIAgSQAQQN\nAgAiYAAAMUgDgEBwAEAQgiCAEAAASQBUAAAAEQSGAAAKIDghhFAAAkAlYAKJCBCBIEEBwmAAEEAY\nCiEYAACAAZRDAAAxAMSFCEAARgYAAAgAgAYwLg==\n' , b'gAOLMAEAAAAAAAAAAAAAAAAACAAAAAEDIAAAKAQMAAAAoCgYAAhwAAAYGCgAAADARgAAAAAANAAA\nAAABIAAOAAMEAIA5AACYAABAAABgAAAAAAAGAAAAAAAoAAAOAADggA0IAAAABzYhwAwAAGBEARQA\nQgAABXBACAAAAAADywBgAAAEjgPgAQDYAAQAAAC4AQAAAAZgDAAAABgAIAAAAAMAAIABgAMwAAAA\nAAJAAAxAAAAAADgAAQAAAAAABgAEDgAAAAAoMAAAgAAgAQAAABEADQABgHnAMABkACQCAgCYAQAH\nCCAAYAAkEAAGwAFwAAAIAADCAQCADIAhAAAAGAyMAQAAAIgIDCAQAABCcCAACBgCgAEE5mAGAAA4\nhCEZAADAABJCAAAAA+ANAAAAwAMAAAAAAA8u\n' ),
( b'gAOLMgEAAAAAAAAAACAJgIAQQIUAQAQgCIAAoBEMYBQCARpiAECAAaAAUAICAhAAAZwAAgABhQgA\n0AcIYgpAiCACQAApBgABAiFAAhQACQAQICgAACgAEEAcIAgANKDi5QGFkJEAGAAAABAICooCgAkA\nYAwAABEAAUFCAEKKAQQSQHAIABAAAQBBAAJBAAQgwKALAEAIAAAgFCABAEQQEghQAoCAIkAAAAIA\nwhCwhQQcgECBjCDAICQgIgAQWAgAEAEAAACCBACAAgEEgAAggqAAwApAiBBCVgRBALCAgACIBhAI\nAFFEAACGCAIgAyEAIJAEB2AEEDIAgJCAACgAYDCkAQhBEABAiAiIAAAAkAIQgQCAgIBAACABgAEB\nAckBEAAAKAYgAIABEhJCCACwEAEECQxAxAQLEi4=\n' , b'gAOLMAEAAAAAAAAAAAAAAAAAAEAAYAYDGAgBwAgcYAgAADtwgOGAATCAAAcABwCAAB4A/AAABjEA\n8AcAOASAgD8AQBAQAwIAAABAHAwAAAQAACgCAAAACLAEYMAAGECRxQEA4AGEmAQAYAYALAcAgAAA\ncAwAADsAAGMAACIEAA4AAPAIACAAAAABACABAAAAAAALAiAAAANaCAACAABAOQAAAADAYQBgAAAF\nxCDwAQw4gIKAEgDAAAYAdgAAAAAAAABA4AAAAAAAAQAAcAEAAkAAgAYAABwBIAZAAWAA4AgIA0AA\nAAHgAAAAAIZgAhAAQBQAD2AAADUABIhwALQAACAAAwABAAAASgCMAAAAcAEwAAAAoADgAHAAAAEA\ng8EBAAAADA4DAAAAYBjAAAA4mMCEAwDAwAAu\n' ),
( b'gAOLMgEAAAAAAAAAAFACIAAEgAACIABAQAQAAgQIJEAAhAkBgBEgAAAAAEEGACAmCEABICgAEgBA\nQAAQAAAAKEAEQIkABYGghACAEAIACISAQgBBQjBEAQASBFgQAKBgABgACAQgYMAEAGAARDAAICBA\nFLqAAMKCAAgAEYAQAEAAAAQEiEEaCBUEAAAAAAEBgCEAAgABiISAgiQhAgQCkjBAUAkQIiAMRQQA\nAQAAIAAEgBAghBCAEACgogCIkASBQUUAlAtAEGiAICAwAEAAAiUWIAmAEAAAAQEkQkEAQCDgAAAC\nIBBKYAAQBgAiKAEAwBEIAiCAAGAIKAAUCgABTAhCARFJgAAAASAACAAACAAAZAAAgIACEAgAIIQC\ngAUAACAIUkALACAkAAQYBAQQoaMEIAAqAIkZKC4=\n' , b'gAOLMQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAYAAAAAAAwIEBAAQAAMIAAAAAAIAYAAAIAAAA\nAAAAIACAAAAAAAAAwgEAgANAEAAAGQ4AAQAAADAGAAAUAO4AAgBwGMgAAAiAIeAAADAAQj4AALAB\nCLcAAMABAGgAAIACAGAAgAICAAAAACgAYARAAKAAgAEAAAAAAMUBBQwAIAYGGThDuAAAAEAAggIA\nAAAQMAAAAABQQAAAAACg8QEAgwGAhw0AjBsMACgA4EoAAMAABgDgAAAAOAgAAAAogAAAAADwGAAC\nAACFZgAAYABUgAEAgBgEBQAAAeIADAAoBAADcABAAAAAAAAAAQAAGAAAAEAAYAAAAEABUAEAAAQC\ngGAAABAYAAIDAABgMAAeAAAZwDMGEAAAAIsZLg==\n' ),
]

if __name__ == "__main__":
    unittest.main()

